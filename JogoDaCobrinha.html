<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Snake</title>
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <button onclick="IniciarJogo()">Play</button>
  <button onclick="PausarJogo()">Pause</button>
  <div class="tabuleiroStyle" id="tabuleiro">
  </div>
</body>

</html>
<script>
  var TabuleiroTamanho = 9

  var Jogando = false
  var FimJogo = false;

  var direction = [1,0]
  var position = [1,0]
  var corpoCobra = [position,position,position]
  
  var TeclaCima = ["KeyW"]
  var TeclaBaixo = ["KeyS"]
  var TeclaEsquerda = ["KeyA"]
  var TeclaDireita = ["KeyD"]

  var frutaPos = [2,2]

  for(var y = 0; y < TabuleiroTamanho; y++){ //criando o tabuleiro
    for(var x = 0; x < TabuleiroTamanho; x++){
      tabuleiro.innerHTML += `<div class="campo" style="width:${500/TabuleiroTamanho}px; height:${500/TabuleiroTamanho}px" id="campo_n${x.toString() + y.toString()}"></button>`
    }
  }

  function IniciarJogo() {
    setTimeout(move, 1000)
    jogando = true
  }

  function PausarJogo(){
    jogando = false
  }

  window.addEventListener('keydown', event => {
    if (TeclaCima.includes(event.code) && direction[1] != 1){
      direction = [0, -1]
    }
    if (TeclaBaixo.includes(event.code)&& direction[1] != -1){
      direction = [0, 1]
    }
    if (TeclaEsquerda.includes(event.code)&& direction[0] != 1){
      direction = [-1, 0]
    }
    if (TeclaDireita.includes(event.code) && direction[0] != -1){
      direction = [1, 0]
    }
  });

  function move(){
    position[0] += direction[0]
    position[1] += direction[1]
    if(position[0] >= TabuleiroTamanho){
      position[0] = 0
    }
    if(position[1] >= TabuleiroTamanho){
      position[1] = 0
    }
    if(position[0] < 0){
      position[0] =  TabuleiroTamanho - 1
    }
    if(position[1]<0){
      position[1] =  TabuleiroTamanho - 1
    }

    if(jogando){
      setTimeout(move, 200)
    }

    var newPos = [position[0],position[1]]
    corpoCobra.push(newPos) //adicionando nova posição ao corpo

    if(position[0] == frutaPos[0] && position[1] == frutaPos[1]){
      GerarFruta();
    }else{
      corpoCobra.shift() // tirando ultima posição
    }
    
    
    PintarPosition()
    
  }

  function PintarPosition(){
    for (var x = 0; x < TabuleiroTamanho; x++) { //deixa tudo branco
      for (var y = 0; y < TabuleiroTamanho; y++) {
        document.getElementById("campo_n" + x.toString() + y.toString()).style.backgroundColor = "black";
      }
    }

    document.getElementById("campo_n" + frutaPos[0].toString() + frutaPos[1].toString()).style.backgroundColor = "red";
    
    for(var i = 0; i<corpoCobra.length; i++){ //pinta o corpo da cobra
      var atualCorpoPos = corpoCobra[i]

      document.getElementById("campo_n" + atualCorpoPos[0].toString() + atualCorpoPos[1].toString()).style.backgroundColor = "green";
    }
    //document.getElementById("campo_n" + position[0].toString() + position[1].toString()).style.backgroundColor = "red"; // cabeça da cobra
  }

  function GerarFruta(){
    var posx = getRandomInt(0,9)
    var posy = getRandomInt(0,9)

    var corpox = []
    var corpoy = []
    for(var i = 0; i<corpoCobra.length; i++){ //pinta o corpo da cobra
      var atualCorpoPos = corpoCobra[i]

      corpox.push(atualCorpoPos[0])
      corpoy.push(atualCorpoPos[1])
    }
    while(corpox.includes[posx] && corpoy.includes[posy]){
      posx = getRandomInt(0,9)
      posy = getRandomInt(0,9)
    }
    frutaPos = [posx,posy]
  }

  function getRandomInt(min, max) {
    min = Math.ceil(min);
    max = Math.floor(max);
    return Math.floor(Math.random() * (max - min)) + min;
  } 
</script>
y